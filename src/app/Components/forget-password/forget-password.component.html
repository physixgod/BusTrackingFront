<!-- forget-password.component.html -->
<!DOCTYPE html>
<html lang="en" class="light-style customizer-hide" dir="ltr" data-theme="theme-default" data-assets-path="../assets/" data-template="vertical-menu-template-free">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
  <meta name="description" content="SmartBus - Track and Manage Your Fleet" />
  <title>SmartBus - Forgot Password</title>
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/BackOffice/assets/css/main.css" />
</head>

<body>
  <!-- Content -->
  <div class="container-xxl">
    <div class="authentication-wrapper authentication-basic container-p-y">
      <div class="authentication-inner py-4">
        <!-- Forgot Password -->
        <div class="card">
          <div class="card-body">
            <!-- Logo -->
            <div class="app-brand justify-content-center mb-4">
              <a href="index.html" class="app-brand-link">
                <img src="/assets/images/CST.jpg" alt="CTS Logo" class="app-brand-logo" style="max-height: 100px;" />
              </a>
            </div>
            <!-- /Logo -->
            <h4 class="mb-4">{{ showResetFields ? 'Reset Your Password ðŸ”’' : 'Forgot Password? ðŸ”’' }}</h4>
            <p class="mb-4">{{ showResetFields ? 'Enter your reset code and new password' : '' }}</p>

            <form *ngIf="!showResetFields" (ngSubmit)="onSendCode()" class="mb-3">
              <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" [(ngModel)]="email" name="email" placeholder="Enter your email" required />
              </div>
              <div class="mb-3">
                <button class="btn btn-primary d-grid w-100" type="submit">Send Reset Code</button>
              </div>
            </form>

            <form *ngIf="showResetFields" (ngSubmit)="onResetPassword()" class="mb-3">
              <div class="mb-3">
                <label for="code" class="form-label">Reset Code</label>
                <input type="text" class="form-control" id="code" [(ngModel)]="code" name="code" placeholder="Enter reset code" required />
              </div>
              <div class="mb-3">
                <label for="newPassword" class="form-label">New Password</label>
                <input type="password" class="form-control" id="newPassword" [(ngModel)]="newPassword" name="newPassword" placeholder="Enter new password" required />
              </div>
              <div class="mb-3">
                <button [routerLink]="['/login']" class="btn btn-primary d-grid w-100" type="submit">Reset Password</button>
              </div>
            </form>

            <div class="text-center">
                <a [routerLink]="['/login']" class="d-flex align-items-center justify-content-center">
                    <i class="bx bx-chevron-left scaleX-n1-rtl bx-sm"></i>
                    Back to login
                  </a>
            </div>

            <div *ngIf="errorMessage" class="alert alert-danger mt-3" role="alert">
              {{ errorMessage }}
            </div>
            <div *ngIf="successMessage" class="alert alert-success mt-3" role="alert">
              {{ successMessage }}
            </div>
          </div>
        </div>
        <!-- /Forgot Password -->
      </div>
    </div>
  </div>
  <!-- / Content -->
  <!-- Core JS -->
  <script src="/assets/BackOffice/assets/vendor/js/helpers.js"></script>
  <script src="/assets/BackOffice/assets/js/config.js"></script>
  <script src="/assets/BackOffice/assets/vendor/js/bootstrap.js"></script>
  <script src="/assets/BackOffice/assets/vendor/libs/jquery/jquery.js"></script>
  <script src="/assets/BackOffice/assets/vendor/libs/popper/popper.js"></script>
  <script src="/assets/BackOffice/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
  <script src="/assets/BackOffice/assets/vendor/js/menu.js"></script>
  <script src="/assets/BackOffice/assets/vendor/libs/apex-charts/apexcharts.js"></script>
  <script src="/assets/BackOffice/assets/js/main.js"></script>
  <script src="/assets/BackOffice/assets/js/dashboards-analytics.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
</body>

</html>
